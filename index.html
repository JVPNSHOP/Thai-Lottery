<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>၂D/၃D ထီဂဏန်း ရောင်းဝယ်ရေး</title>
    <style>
        body { font-family: 'Arial', sans-serif; margin: 20px; background-color: #f4f4f4; }
        .container { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .section-header { margin-top: 20px; border-bottom: 2px solid #333; padding-bottom: 5px; }
        .stats-box { margin-top: 15px; padding: 10px; border: 1px solid #ccc; background-color: #e9e9e9; }
        .number-input { margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        .receipt { border: 1px dashed #333; padding: 15px; margin-top: 20px; background-color: #fff; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔢 ၂D/၃D ထီဂဏန်း ရောင်းချမှု စနစ်</h1>

        <div class="section-header">
            <h2>၁။ ဂဏန်း ထည့်သွင်းခြင်း</h2>
        </div>
        <div class="number-input">
            <label for="input2DUp">၂D အပေါ် ဂဏန်း (၀၀ မှ ၉၉):</label>
            <input type="number" id="input2DUp" min="0" max="99">
            <label for="amount2DUp">ငွေပမာဏ:</label>
            <input type="number" id="amount2DUp" min="100">
            <button onclick="addEntry('2D_Up')">ထည့်ရန်</button>
        </div>

        <div class="number-input">
            <label for="input2DDown">၂D အောက် ဂဏန်း (၀၀ မှ ၉၉):</label>
            <input type="number" id="input2DDown" min="0" max="99">
            <label for="amount2DDown">ငွေပမာဏ:</label>
            <input type="number" id="amount2DDown" min="100">
            <button onclick="addEntry('2D_Down')">ထည့်ရန်</button>
        </div>
        
        <div class="number-input">
            <label for="input3D">၃D ဂဏန်း (၀၀၀ မှ ၉၉၉):</label>
            <input type="number" id="input3D" min="0" max="999">
            <label for="amount3D">ငွေပမာဏ:</label>
            <input type="number" id="amount3D" min="100">
            <button onclick="addEntry('3D')">ထည့်ရန်</button>
        </div>

        <div class="number-input">
            <label for="inputTut3">တွတ်သုံးလုံး အပြန် ဂဏန်း:</label>
            <input type="number" id="inputTut3" min="0" max="999">
            <label for="amountTut3">ငွေပမာဏ:</label>
            <input type="number" id="amountTut3" min="100">
            <button onclick="addEntry('Tut_3')">ထည့်ရန်</button>
        </div>
        
        <h3>ရောင်းချထားသော စာရင်း</h3>
        <table border="1" width="100%">
            <thead>
                <tr>
                    <th>အမျိုးအစား</th>
                    <th>ဂဏန်း</th>
                    <th>ငွေပမာဏ</th>
                </tr>
            </thead>
            <tbody id="salesList">
                </tbody>
        </table>

        <div class="section-header">
            <h2>၂။ ဘောင်ချာ (Receipt)</h2>
        </div>
        <div class="receipt" id="receiptArea">
            <h4>ဘောင်ချာ နံပါတ်: <span id="receiptNumber">...</span></h4>
            <p>နေ့စွဲ: <span id="receiptDate">...</span></p>
            <p>ဂဏန်းများ: <ul id="receiptItems"></ul></p>
            <p>စုစုပေါင်း: <strong id="receiptTotal">၀ ကျပ်</strong></p>
            <button onclick="printReceipt()">ဘောင်ချာ ပရင့် ထုတ်ရန်</button>
        </div>
        
        <div class="section-header">
            <h2>၃။ စုစုပေါင်း စာရင်းအင်း</h2>
        </div>
        <div class="stats-box">
            <p>စုစုပေါင်း ရောင်းထားသည့် ဂဏန်းအရေအတွက်: <strong id="totalNumbersSold">၀</strong></p>
            <p>စုစုပေါင်း ရောင်းရငွေ: <strong id="totalSalesAmount">၀ ကျပ်</strong></p>
        </div>

    </div>

    <script>
        // အရေးကြီးတဲ့ JavaScript လုပ်ဆောင်ချက်တွေ ဒီနေရာမှာ ရေးရပါမယ်
        let salesData = [];
        let totalSales = 0;
        let totalCount = 0;
        let receiptCounter = 1000; // ဘောင်ချာနံပါတ် စမှတ်

        function addEntry(type) {
            let inputId, amountId, number, amount;
            
            // 1. ဂဏန်းနဲ့ ပမာဏကို ရယူခြင်း
            if (type === '2D_Up') {
                number = document.getElementById('input2DUp').value;
                amount = parseInt(document.getElementById('amount2DUp').value);
                if (number.length !== 2 || amount < 100) { alert("2D အပေါ်ဂဏန်း သို့မဟုတ် ငွေပမာဏ မှားယွင်းနေပါသည်။"); return; }
            } else if (type === '2D_Down') {
                number = document.getElementById('input2DDown').value;
                amount = parseInt(document.getElementById('amount2DDown').value);
                if (number.length !== 2 || amount < 100) { alert("2D အောက်ဂဏန်း သို့မဟုတ် ငွေပမာဏ မှားယွင်းနေပါသည်။"); return; }
            } else if (type === '3D') {
                number = document.getElementById('input3D').value;
                amount = parseInt(document.getElementById('amount3D').value);
                if (number.length !== 3 || amount < 100) { alert("3D ဂဏန်း သို့မဟုတ် ငွေပမာဏ မှားယွင်းနေပါသည်။"); return; }
            } else if (type === 'Tut_3') {
                // တွတ်သုံးလုံးအတွက် သီးခြား logic လိုအပ်သည် (ဥပမာ- ဂဏန်း ၆ မျိုး ခွဲထည့်ရန်)
                number = document.getElementById('inputTut3').value;
                amount = parseInt(document.getElementById('amountTut3').value);
                if (number.length !== 3 || amount < 100) { alert("တွတ်သုံးလုံး ဂဏန်း သို့မဟုတ် ငွေပမာဏ မှားယွင်းနေပါသည်။"); return; }
                // ဤနေရာတွင် တွတ်သုံးလုံး အပြန်အတွက် နောက်ထပ် entry များ ထည့်သွင်းရန် လိုအပ်သည်
                // ဥပမာ- '123' ကို '123', '132', '213', '231', '312', '321' အဖြစ် ထည့်သွင်းရန်
            }
            
            // 2. ဒေတာကို စာရင်းထဲ ထည့်ခြင်း
            const entry = { type: type, number: number, amount: amount };
            salesData.push(entry);

            // 3. စုစုပေါင်း တွက်ချက်မှု အဆင့်မြှင့်တင်ခြင်း
            totalSales += amount;
            totalCount += 1; // ဒီနေရာမှာ တွတ်သုံးလုံးအတွက် ဂဏန်း ၆ လုံးဆို ၆ ခု လိုအပ်ပါမယ်

            // 4. စာမျက်နှာကို အဆင့်မြှင့်တင်ခြင်း
            updateDisplay();
        }

        function updateDisplay() {
            // စာရင်း ဇယားကို ဖြည့်ခြင်း
            const salesList = document.getElementById('salesList');
            salesList.innerHTML = '';
            let currentReceiptItems = "";
            let currentReceiptTotal = 0;

            salesData.forEach(item => {
                const row = salesList.insertRow();
                row.insertCell(0).textContent = item.type.replace('_', ' '); // အမျိုးအစား
                row.insertCell(1).textContent = item.number; // ဂဏန်း
                row.insertCell(2).textContent = item.amount.toLocaleString() + ' Ks'; // ပမာဏ

                // ဘောင်ချာအတွက် ဒေတာ စုစည်းခြင်း
                currentReceiptItems += `<li>${item.type.replace('_', ' ')}: ${item.number} - ${item.amount.toLocaleString()} Ks</li>`;
                currentReceiptTotal += item.amount;
            });

            // စုစုပေါင်း စာရင်းအင်းများကို ပြသခြင်း
            document.getElementById('totalNumbersSold').textContent = totalCount.toLocaleString();
            document.getElementById('totalSalesAmount').textContent = totalSales.toLocaleString() + ' Ks';

            // ဘောင်ချာ ဧရိယာကို ဖြည့်ခြင်း
            document.getElementById('receiptNumber').textContent = 'BCH-' + receiptCounter;
            document.getElementById('receiptDate').textContent = new Date().toLocaleString();
            document.getElementById('receiptItems').innerHTML = currentReceiptItems;
            document.getElementById('receiptTotal').textContent = currentReceiptTotal.toLocaleString() + ' Ks';
        }

        function printReceipt() {
            if (salesData.length === 0) {
                alert("အရင်ဆုံး ဂဏန်းထည့်သွင်းပေးပါ။");
                return;
            }
            
            // print လုပ်ရန်အတွက် ဧရိယာကို ရယူပြီး print ဝင်းဒိုးဖွင့်ခြင်း
            const receiptContent = document.getElementById('receiptArea').outerHTML;
            const printWindow = window.open('', '', 'height=600,width=400');
            printWindow.document.write('<html><head><title>ဘောင်ချာ</title>');
            printWindow.document.write('<style>body { font-family: Tahoma, sans-serif; } .receipt { border: 1px dashed #333; padding: 15px; } ul { list-style: none; padding-left: 0; } </style>');
            printWindow.document.write('</head><body>');
            printWindow.document.write(receiptContent);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.print();

            // ဘောင်ချာနံပါတ် တိုးမြှင့်ခြင်း
            receiptCounter++;
            
            // ရောင်းချပြီးသား ဒေတာများကို ရှင်းလင်းခြင်း (Backend တွင် သိမ်းဆည်းပြီးမှ ရှင်းသင့်သည်)
            salesData = [];
            totalSales = 0;
            totalCount = 0;
            updateDisplay(); // စာမျက်နှာကို ပြန်လည် အဆင့်မြှင့်တင်ခြင်း
        }
        
        // စတင်ချိန်တွင် စာမျက်နှာကို ပြသခြင်း
        updateDisplay(); 

        // တွတ်သုံးလုံး အပြန်အတွက် ရှင်းလင်းချက်
        function generatePermutations(numStr) {
            // ဒီ function က '123' ဆိုရင် ['123', '132', '213', '231', '312', '321'] ကို ထုတ်ပေးရပါမယ်။
            // တကယ်တမ်း စနစ်ကျတဲ့ စနစ်အတွက် ဒီနေရာမှာ ပိုမိုရှုပ်ထွေးတဲ့ logic လိုအပ်ပါလိမ့်မယ်။
        }

    </script>
</body>
</html>
